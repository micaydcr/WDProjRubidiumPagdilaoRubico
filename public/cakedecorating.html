<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="/assets/favicon.png">
<meta charset="UTF-8">
<title>MiCayke Decorating!</title>
<link rel="icon" type="image/x-icon" href="./assets/Gamer (2).png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    margin: 0;
    height: 100vh;
    background-image: url(/assets/backgroundprojects.png);
    background-size: 100% 95%;
    font-family: sans-serif;
    opacity: 0; 
    animation: fadeIn 1.5s ease forwards; 
}


@keyframes fadeIn {
    to {
        opacity: 1;
    }
}


button {
    transition: transform 0.3s ease, background 0.3s ease; 
}

button:hover {
    transform: scale(1.05); 
    background: linear-gradient(180deg,#ffe6e6,#ffd6d6); 
}

#stage-container {
    width: 900px;
    height: 700px;
    margin-top: 80px;
    margin-left: 500px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.15);
    display: flex;
    flex-direction: column; 
    align-items: center;
    padding-top: 20px; 
}

 #stage {
    width: 850px; 
    height: 600px;
    background: linear-gradient(180deg,#fff,#ffcdd362);
    border-radius: 16px;
    position: relative;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 10px 20px rgba(216, 196, 196, 0.947);
}


#cake-header {
    width: 100%;
    margin-top: -20px;
    margin-right: -50px;
    flex-direction: column; 
    text-align: left;
    margin-bottom: 10px;
}

#cake-header h1 {
    margin-left: 10px;
    font-size: 28px;
    color: #90586e;
    margin-bottom: 3px;
}


#palette {
    position: fixed;
    top: 80px;
    left: 10px;
    margin-left: 100px;
    background: white;
    padding: 10px;
    border-radius: 10px;
    box-shadow: 0 4px 10px #7e666ca2;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    gap: 8px;
    z-index: 1000;
}

.bubbles{
          z-index: 100;
}
.tier {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(180deg,#fffaf2,#fff1e6);
    border-radius: 24px;
    box-shadow: 0 8px 18px rgba(0,0,0,0.12) inset;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: transform 300ms ease;
    z-index: 10;
}

.tier.base { width: 470px; height: 220px; bottom: 24px; }
.tier.mid  { width: 410px; height: 190px; bottom: 220px; }
.tier.top  { width: 320px; height: 160px; bottom: 390px; }

.item{
    width:62px; height:62px; border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:28px;
    border:2px solid #ffe7ea; background:linear-gradient(180deg,#fff,#fff0); cursor:pointer;
    box-shadow:0 4px 10px rgba(120,80,80,0.06);
  }
  .item:hover{transform:translateY(-6px); transition:transform 200ms}
  .small{width:44px;height:44px;font-size:20px}

.hint {
    font-size: 14px;
    color: #775663;
    margin-bottom: 8px;
    text-align: left;
    max-width: 600px;  
}

.controls {
    display: flex;
    justify-content: left; 
    gap: 10px;  
    margin-left: auto; 
    margin-right: 50px;            
}


.header-row {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    width: 100%;
}

button{
    background:linear-gradient(180deg,#fff,#ffeeef);
    border:1px solid #f0c9d0; 
    padding:8px 12px;
     border-radius:10px;
    cursor:pointer;
    font-weight:600;
    color:#775663;
  }

#homeButton {
    position: fixed;
    top: 650px; 
    left: 125px;
    padding: 10px 20px;
    font-size: 40px;
    border-radius: 10px;
    border: 1px solid #f0c9d0;
    background: linear-gradient(180deg,#fff,#ffeeef);
    cursor: pointer;
    box-shadow: #775663;
    z-index: 1000;
}

#palette img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    cursor: pointer;
    border-radius:10px; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    font-size:28px;
    border:2px solid #ffe7ea; 
    background:linear-gradient(180deg,#fff,#fff0); 
    cursor:pointer;
    box-shadow:0 4px 10px rgb(137, 111, 111);
}

#palette img:hover {
    border-color: #ffc9d7;
        box-shadow:0 4px 10px rgba(120,80,80,0.06);
}


img.draggable {
    position: absolute;
    cursor: grab;
    user-select: none;
}

img.draggable:active {
    cursor: grabbing;
}

 
</style>
</head>

<body>



<div id="palette"></div>

<button id="homeButton" class="homeButton">üè† Home</button>

<div id="stage-container">
    <header id="cake-header">
    <div class="header-row">
        <h1>üç∞ Cake Decorator</h1>
        <div class="controls">
            <button id="randomizeAdd">üé® Random Decor</button>
            <button id="clear">üßº Clear</button>
        </div>
    </div>
    <div class="hint">
        Tip: click a palette item to add it to the cake. Drag to move. Double-click to remove.
    </div>
</header>



    <div id="stage" class="stage">
        <div class="tier base"></div>
        <div class="tier mid"></div>
        <div class="tier top"></div>
    </div>
</div>




  


<script>
document.getElementById('homeButton').addEventListener('click', () => {
    window.location.href = "../index.html"; 
});

const CATEGORIES = {
    decorations: [
        "/assets/strawberry1.png",
       "/assets/Blueberry_Transparent_Clip_Art_Image.png", "/assets/pearll.png", 
       "/assets/ribbon.png",
       "/assets/white_choco.png","/assets/choco_icing.png",
       "/assets/strawberry_icing.png","/assets/blue_icing.png",
       "/assets/candle.png","/assets/sprinkles.png","/assets/rainbow_sprinkles.png","/assets/image_(0).png","/assets/image_(1).png",
       "/assets/image_(2).png","/assets/image_(3).png","/assets/image_(4).png",
       "/assets/image_(5).png","/assets/image_(6).png","/assets/image_(7).png",
       "/assets/image_(8).png","/assets/image_(9).png"
    ]
};

const stage = document.getElementById('stage');
const paletteEl = document.getElementById('palette');
const categoryArrays = Object.values(CATEGORIES);


let allItems = [];
for (let i = 0; i < categoryArrays.length; i++) {
    allItems = allItems.concat(categoryArrays[i]);
}


const defaultItems = [];
for (let i = 0; i < allItems.length; i++) {
    if (!defaultItems.includes(allItems[i])) {
        defaultItems.push(allItems[i]);
    }
}

document.getElementById('randomizeAdd').addEventListener('click', () => {
    const count = 3 + Math.floor(Math.random() * 4); 
    const rect = stage.getBoundingClientRect();

    for (let i = 0; i < count; i++) {
        const src = defaultItems[Math.floor(Math.random() * defaultItems.length)];
        addDecoration(src);

        const img = stage.querySelector('.draggable:last-child');

        const maxX = rect.width - img.offsetWidth;
        const maxY = rect.height - img.offsetHeight;

        img.style.left = Math.random() * maxX + 'px';
        img.style.top  = Math.random() * maxY + 'px';
    }
});

document.getElementById('clear').addEventListener('click', () => {
    const decorations = stage.querySelectorAll('.draggable');
    decorations.forEach(img => img.remove());
});

function renderPalette(items = defaultItems) {
    paletteEl.innerHTML = '';
    items.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.title = 'Click to add';
        img.className = 'item';
        img.onclick = () => addDecoration(src);
        paletteEl.appendChild(img);
    });
}


function addDecoration(src) {
    const img = document.createElement('img');
    img.src = src;
    img.className = 'draggable';
    img.width = 90;       
    img.style.height = 'auto';
    img.style.zIndex = 20; 


    stage.appendChild(img);

    setTimeout(() => {
        const imgWidth = img.offsetWidth;
        const imgHeight = img.offsetHeight;

        img.style.left = (stage.clientWidth / 2 - imgWidth / 2) + 'px';
        img.style.top  = (stage.clientHeight / 2 - imgHeight / 2) + 'px';
    }, 0);

    makeDraggable(img);

     img.addEventListener('dblclick', () => {
        img.remove();
    });
}



let activeImg = null;
let offsetX = 0;
let offsetY = 0;

function makeDraggable(img) {
    img.addEventListener('mousedown', e => {
        activeImg = img;
        const rect = stage.getBoundingClientRect();
        offsetX = e.clientX - rect.left - img.offsetLeft;
        offsetY = e.clientY - rect.top - img.offsetTop;
        e.preventDefault();
    });

    img.addEventListener('touchstart', e => {
        activeImg = img;
        const t = e.touches[0];
        const rect = stage.getBoundingClientRect();
        offsetX = t.clientX - rect.left - img.offsetLeft;
        offsetY = t.clientY - rect.top - img.offsetTop;
        e.preventDefault();
    });
}



document.addEventListener('mousemove', e => {
    if (!activeImg) return;
    const rect = stage.getBoundingClientRect();

    let x = e.clientX - rect.left - offsetX;
    let y = e.clientY - rect.top - offsetY;

    const maxX = rect.width - activeImg.offsetWidth;
    const maxY = rect.height - activeImg.offsetHeight;

    x = Math.max(0, Math.min(x, maxX));
    y = Math.max(0, Math.min(y, maxY));

    activeImg.style.left = x + 'px';
    activeImg.style.top = y + 'px';
});


document.addEventListener('touchmove', e => {
    if (!activeImg) return;
    const t = e.touches[0];
    const rect = stage.getBoundingClientRect();

    let x = t.clientX - rect.left - offsetX;
    let y = t.clientY - rect.top - offsetY;

    const maxX = rect.width - activeImg.offsetWidth;
    const maxY = rect.height - activeImg.offsetHeight;

    x = Math.max(0, Math.min(x, maxX));
    y = Math.max(0, Math.min(y, maxY));

    activeImg.style.left = x + 'px';
    activeImg.style.top = y + 'px';
});

document.addEventListener('mouseup', () => activeImg = null);
document.addEventListener('touchend', () => activeImg = null);


renderPalette();
</script>

</body>
</html>
